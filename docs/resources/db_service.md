---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "tessell_db_service Resource - terraform-provider-tessell"
subcategory: ""
description: |-
  
---

# tessell_db_service (Resource)

Tessell offers a fully managed database service offering. The 'DB Service' resource reperesents the Tessell managed Database Service.

Changes to a DB Service can occur when you wish to update its state. Example: A DB Service can be stopped, and started back at a later point of time.

DB Service Engine Types:
Tessell supports managed database service for four types of database engines: Oracle, Microsoft SQL Server, Postgresql, and MySQL.

DB Service Topology:
Tessell supports both single instance and highly available database service topologies.

Clouds:
Tessell supports managed database services on AWS and Azure clouds.

Encryption at rest:
The Tessell managed database services support the data at rest encryption.

## Example Usage

```terraform
# Provision Postgresql Single Instance DB service
resource "tessell_db_service" "example" {
  name                       = "finance-db"
  description                = "Database for finance department"
  subscription               = "default"
  engine_type                = "POSTGRESQL"
  topology                   = "single_instance"
  software_image             = "PostgreSQL 13"
  software_image_version     = "PostgreSQL 13.3"
  auto_minor_version_update  = true
  enable_deletion_protection = false

  infrastructure {
    cloud              = "aws"
    region             = "ap-south-1"
    availability_zone  = "ap-south-1a"
    vpc                = "default-vpc-1234"
    compute_type       = "t2.small"
    additional_storage = 0
    encryption_key     = "finance-db-encyption-key-with-salt"
  }

  service_connectivity {
    service_port         = "5432"
    enable_public_access = true
    allowed_ip_addresses = [
      "11.22.33.44"
    ]
  }

  creds {
    master_user     = "master"
    master_password = "MyPassword@123"
  }

  maintenance_window {
    day      = "Sunday"
    time     = "02:00"
    duration = 30
  }

  snapshot_configuration {
    auto_snapshot = true
    sla           = "2-days-pitr"
    snapshot_window {
      time     = "01:00"
      duration = 30
    }
  }

  engine_configuration {
    postgresql_config {
      parameter_profile = "PostgreSQL 13 Profile"
    }
  }

  databases {
    database_name = "db1"
    database_configuration {
      postgresql_config {
        parameter_profile = "PostgreSQL 13 Profile"
      }
    }
  }

  tags {
    name  = "department"
    value = "finance"
  }
  tags {
    name  = "finance"
    value = ""
  }
}

# Create a clone of a Oracle DB service
resource "tessell_db_service" "example" {
  name                       = "finance-db-clone"
  description                = "Clone of finance database for QA use"
  subscription               = "default"
  engine_type                = "ORACLE"
  topology                   = "single_instance"
  software_image             = "Oracle 12c"
  software_image_version     = "12.1.0.2.0"
  auto_minor_version_update  = true
  enable_deletion_protection = false

  infrastructure {
    cloud              = "aws"
    region             = "ap-south-1"
    availability_zone  = "ap-south-1a"
    vpc                = "default-vpc-1234"
    compute_type       = "m5.large"
    additional_storage = 0
  }

  service_connectivity {
    service_port         = "1521"
    enable_public_access = true
    allowed_ip_addresses = [
      "11.22.33.44"
    ]
  }

  creds {
    master_user     = "master"
    master_password = "MyPassword@123"
  }

  snapshot_configuration {
    auto_snapshot = true
    sla           = "2-days-pitr"
    snapshot_window {
      time     = "01:00"
      duration = 30
    }
  }

  engine_configuration {
    oracle_config {
      parameter_profile      = "Oracle Parameter Profile"
      options_profile        = "Oracle 12.1.0.2.0 Options Profile"
      character_set          = "AL32UTF8"
      national_character_set = "AL16UTF16"
    }
  }

  databases {
    source_database_id = "14107367-fbc3-4f3d-8cc3-b5a7e5910e08"
    database_name      = "orcl"
    database_configuration {
      oracle_config {
        parameter_profile = "Oracle Parameter Profile"
        options_profile   = "Oracle 12.1.0.2.0 Options Profile"
      }
    }
  }

  tags {
    name  = "department"
    value = "finance"
  }
  tags {
    name  = "finance-qa"
    value = ""
  }
  snapshot_id = "4592803a-a8a3-4a5e-be4c-ddf1df654242"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `creds` (Block List, Min: 1, Max: 1) DB Service's credential details (see [below for nested schema](#nestedblock--creds))
- `engine_configuration` (Block List, Min: 1, Max: 1) This field details the DB Service engine configuration details like - parameter profile, or options profile (if applicable) are used to configure the DB Service. (see [below for nested schema](#nestedblock--engine_configuration))
- `engine_type` (String)
- `infrastructure` (Block List, Min: 1, Max: 1) This field contains DB Service's infrastructure related information, like, where the service is hosted - cloud, region; what compute shape, or network is is configured with. (see [below for nested schema](#nestedblock--infrastructure))
- `name` (String) Name of the DB Service
- `service_connectivity` (Block List, Min: 1, Max: 1) DB Service's connectivity information (see [below for nested schema](#nestedblock--service_connectivity))
- `software_image` (String) Software Image to be used to create the DB Service
- `software_image_version` (String) Software Image Version to be used to create the DB Service
- `subscription` (String) Tessell Subscription in which the DB Service is to be created
- `topology` (String)

### Optional

- `auto_minor_version_update` (Boolean) Specify whether to automatically update minor version for DB Service
- `block_until_complete` (Boolean) For any operation on this resource, block the flow until the action has completed successfully
- `databases` (Block List) Databases that are part of this DB Service (see [below for nested schema](#nestedblock--databases))
- `deletion_schedule` (Block List, Max: 1) (see [below for nested schema](#nestedblock--deletion_schedule))
- `description` (String) DB Service's description
- `edition` (String)
- `enable_deletion_protection` (Boolean) Specify whether to enable deletion protection for the DB Service
- `enable_stop_protection` (Boolean) This field specifies whether to enable stop protection for the DB Service. If this is enabled, the stop for the DB Service would be disallowed until this setting is disabled.
- `expected_status` (String) Field used to start/stop a DB service. Ignored during the initial resource creation. Set to "STOPPED" to stop a DB service. Set to "READY" to start a stopped DB service. Defaults to "READY".
- `integrations_config` (Block List, Max: 1) Integrations to be enabled for the DB Service (see [below for nested schema](#nestedblock--integrations_config))
- `maintenance_window` (Block List, Max: 1) This field details the DB Service maintenance related details. (see [below for nested schema](#nestedblock--maintenance_window))
- `parent_availability_machine_id` (String) Id of the parent AvailabilityMachine, required when creating a clone
- `pitr` (String) PITR Timestamp, using which the clone is to be created
- `shared_with` (Block List, Max: 1) Tessell Entity ACL Sharing Info (see [below for nested schema](#nestedblock--shared_with))
- `snapshot_configuration` (Block List, Max: 1) DB Service's backup configurations. If not specified, the default recommended backup configurations would be applied. (see [below for nested schema](#nestedblock--snapshot_configuration))
- `snapshot_id` (String) Tessell service snapshot Id, using which the clone is to be created
- `tags` (Block List) The tags to be associated with the DB Service (see [below for nested schema](#nestedblock--tags))
- `timeout` (Number) If block_until_complete is true, how long it should block for. (In seconds)
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `availability_machine_id` (String) Associated Availability Machine Id
- `cloned_from_info` (List of Object) If the DB Service is created as a clone from some other DB Service, this section describes the parent DB Service and cloning details (see [below for nested schema](#nestedatt--cloned_from_info))
- `context_info` (List of Object) (see [below for nested schema](#nestedatt--context_info))
- `date_created` (String) Timestamp when the DB Service was created at
- `deletion_config` (List of Object) If the service is to be deleted, this config would be honoured if no preference is provided during deleting the service (see [below for nested schema](#nestedatt--deletion_config))
- `id` (String) Tessell generated UUID for the DB Service. This is the unique identifier for the DB Service.
- `instances` (List of Object) Instances associated with this DB Service (see [below for nested schema](#nestedatt--instances))
- `license_type` (String) DB Service License Type
- `logged_in_user_role` (String) Access role for the currently logged in user
- `num_of_instances` (Number) Number of instance (nodes) to be created for the DB Service. This is a required input for Apache Kafka. For all other engines, this input would be ignored even if specified.
- `owner` (String) DB Service owner email address
- `software_image_version_family` (String) Software Image Family DB Service belongs to
- `started_at` (String) Timestamp when the DB Service was last started at
- `status` (String)
- `stopped_at` (String) Timestamp when the DB Service was last stopped at
- `tenant_id` (String) The tenant-id for the DB Service
- `tessell_genie_status` (String) DB Service's Genie status
- `upcoming_scheduled_actions` (List of Object) (see [below for nested schema](#nestedatt--upcoming_scheduled_actions))
- `updates_in_progress` (List of Object) The updates that are in progress for this resource (see [below for nested schema](#nestedatt--updates_in_progress))

<a id="nestedblock--creds"></a>
### Nested Schema for `creds`

Required:

- `master_password` (String) DB Service's master password
- `master_user` (String) DB Service's master username


<a id="nestedblock--engine_configuration"></a>
### Nested Schema for `engine_configuration`

Optional:

- `apache_kafka_config` (Block List, Max: 1) (see [below for nested schema](#nestedblock--engine_configuration--apache_kafka_config))
- `mysql_config` (Block List, Max: 1) (see [below for nested schema](#nestedblock--engine_configuration--mysql_config))
- `oracle_config` (Block List, Max: 1) (see [below for nested schema](#nestedblock--engine_configuration--oracle_config))
- `post_script_info` (Block List, Max: 1) (see [below for nested schema](#nestedblock--engine_configuration--post_script_info))
- `postgresql_config` (Block List, Max: 1) (see [below for nested schema](#nestedblock--engine_configuration--postgresql_config))
- `pre_script_info` (Block List, Max: 1) (see [below for nested schema](#nestedblock--engine_configuration--pre_script_info))
- `sql_server_config` (Block List, Max: 1) (see [below for nested schema](#nestedblock--engine_configuration--sql_server_config))

<a id="nestedblock--engine_configuration--apache_kafka_config"></a>
### Nested Schema for `engine_configuration.apache_kafka_config`

Optional:

- `parameter_profile_id` (String) The parameter profile id for the database


<a id="nestedblock--engine_configuration--mysql_config"></a>
### Nested Schema for `engine_configuration.mysql_config`

Optional:

- `parameter_profile_id` (String) The parameter profile id for the database


<a id="nestedblock--engine_configuration--oracle_config"></a>
### Nested Schema for `engine_configuration.oracle_config`

Optional:

- `character_set` (String) The character-set for the database
- `multi_tenant` (Boolean) Specify whether the DB Service is multi-tenant.
- `national_character_set` (String) The national-character-set for the database
- `options_profile` (String) The options profile for the database
- `parameter_profile_id` (String) The parameter profile id for the database


<a id="nestedblock--engine_configuration--post_script_info"></a>
### Nested Schema for `engine_configuration.post_script_info`

Optional:

- `script_id` (String) The Tessell Script Id
- `script_version` (String) The Tessell Script version


<a id="nestedblock--engine_configuration--postgresql_config"></a>
### Nested Schema for `engine_configuration.postgresql_config`

Optional:

- `parameter_profile_id` (String) The parameter profile id for the database


<a id="nestedblock--engine_configuration--pre_script_info"></a>
### Nested Schema for `engine_configuration.pre_script_info`

Optional:

- `script_id` (String) The Tessell Script Id
- `script_version` (String) The Tessell Script version


<a id="nestedblock--engine_configuration--sql_server_config"></a>
### Nested Schema for `engine_configuration.sql_server_config`

Optional:

- `ad_domain_id` (String) Active Directory Domain id
- `parameter_profile_id` (String) The parameter profile id for the database



<a id="nestedblock--infrastructure"></a>
### Nested Schema for `infrastructure`

Optional:

- `additional_storage` (Number) Size in GB. This is maintained for backward compatibility and would be deprecated soon.
- `availability_zone` (String) The availability-zone in which the DB Service is provisioned
- `cloud` (String) The cloud-type in which the DB Service is provisioned (ex. aws, azure)
- `compute_type` (String) The compute-type to be used for provisioning the DB Service
- `enable_encryption` (Boolean)
- `encryption_key` (String) The encryption key name which is used to encrypt the data at rest
- `region` (String) The region in which the DB Service provisioned
- `vpc` (String) The VPC to be used for provisioning the DB Service

Read-Only:

- `cloud_availability` (List of Object) (see [below for nested schema](#nestedatt--infrastructure--cloud_availability))
- `storage` (Number) The storage (in bytes) that has been provisioned for the DB Service

<a id="nestedatt--infrastructure--cloud_availability"></a>
### Nested Schema for `infrastructure.cloud_availability`

Read-Only:

- `cloud` (String)
- `regions` (List of Object) (see [below for nested schema](#nestedobjatt--infrastructure--cloud_availability--regions))

<a id="nestedobjatt--infrastructure--cloud_availability--regions"></a>
### Nested Schema for `infrastructure.cloud_availability.regions`

Read-Only:

- `availability_zones` (List of String)
- `region` (String)




<a id="nestedblock--service_connectivity"></a>
### Nested Schema for `service_connectivity`

Optional:

- `allowed_ip_addresses` (List of String) The list of allowed ipv4 addresses that can connect to the DB Service
- `dns_prefix` (String)
- `enable_public_access` (Boolean) Specify whether to enable public access to the DB Service, default false
- `enable_ssl` (Boolean)
- `service_port` (Number) The connection port for the DB Service

Read-Only:

- `ca_cert_id` (String)
- `connect_strings` (List of Object) The list of connect strings for the DB Service (see [below for nested schema](#nestedatt--service_connectivity--connect_strings))
- `private_link` (List of Object) The interface endpoint or Gateway Load Balancer endpoint to connect to your DB service. (see [below for nested schema](#nestedatt--service_connectivity--private_link))
- `update_in_progress_info` (List of Object) DB Service connectivity update-in-progress details (see [below for nested schema](#nestedatt--service_connectivity--update_in_progress_info))

<a id="nestedatt--service_connectivity--connect_strings"></a>
### Nested Schema for `service_connectivity.connect_strings`

Read-Only:

- `connect_descriptor` (String)
- `endpoint` (String)
- `master_user` (String)
- `service_port` (Number)
- `type` (String)
- `usage_type` (String)


<a id="nestedatt--service_connectivity--private_link"></a>
### Nested Schema for `service_connectivity.private_link`

Read-Only:

- `client_azure_subscription_ids` (List of String)
- `endpoint_service_name` (String)
- `private_link_service_alias` (String)
- `service_principals` (List of String)
- `status` (String)


<a id="nestedatt--service_connectivity--update_in_progress_info"></a>
### Nested Schema for `service_connectivity.update_in_progress_info`

Read-Only:

- `allowed_ip_addresses` (List of String)
- `dns_prefix` (String)
- `enable_public_access` (Boolean)
- `private_link` (List of Object) (see [below for nested schema](#nestedobjatt--service_connectivity--update_in_progress_info--private_link))

<a id="nestedobjatt--service_connectivity--update_in_progress_info--private_link"></a>
### Nested Schema for `service_connectivity.update_in_progress_info.private_link`

Read-Only:

- `client_azure_subscription_ids` (List of String)
- `service_principals` (List of String)




<a id="nestedblock--databases"></a>
### Nested Schema for `databases`

Optional:

- `database_configuration` (Block List, Max: 1) (see [below for nested schema](#nestedblock--databases--database_configuration))
- `database_name` (String) Database name
- `description` (String) Database description
- `source_database_id` (String) Required while creating a clone. It specifies the Id of the source database from which the clone is being created.

Read-Only:

- `cloned_from_info` (List of Object) If a database is created as a clone from some other DB Service's database, this section describes the original database details (see [below for nested schema](#nestedatt--databases--cloned_from_info))
- `date_created` (String) Timestamp when the entity was created
- `engine_type` (String) Database Engine Type
- `id` (String) The ID of this resource.
- `status` (String) Database status
- `tessell_service_id` (String) Associated DB Service Id

<a id="nestedblock--databases--database_configuration"></a>
### Nested Schema for `databases.database_configuration`

Optional:

- `mysql_config` (Block List, Max: 1) (see [below for nested schema](#nestedblock--databases--database_configuration--mysql_config))
- `oracle_config` (Block List, Max: 1) (see [below for nested schema](#nestedblock--databases--database_configuration--oracle_config))
- `postgresql_config` (Block List, Max: 1) (see [below for nested schema](#nestedblock--databases--database_configuration--postgresql_config))
- `sql_server_config` (Block List, Max: 1) (see [below for nested schema](#nestedblock--databases--database_configuration--sql_server_config))

<a id="nestedblock--databases--database_configuration--mysql_config"></a>
### Nested Schema for `databases.database_configuration.mysql_config`

Optional:

- `parameter_profile_id` (String) The parameter profile id for the database


<a id="nestedblock--databases--database_configuration--oracle_config"></a>
### Nested Schema for `databases.database_configuration.oracle_config`

Optional:

- `options_profile` (String) The options profile for the database
- `parameter_profile_id` (String) The parameter profile id for the database


<a id="nestedblock--databases--database_configuration--postgresql_config"></a>
### Nested Schema for `databases.database_configuration.postgresql_config`

Optional:

- `parameter_profile_id` (String) The parameter profile id for the database


<a id="nestedblock--databases--database_configuration--sql_server_config"></a>
### Nested Schema for `databases.database_configuration.sql_server_config`

Optional:

- `parameter_profile_id` (String) The parameter profile id for the database



<a id="nestedatt--databases--cloned_from_info"></a>
### Nested Schema for `databases.cloned_from_info`

Read-Only:

- `database_id` (String)



<a id="nestedblock--deletion_schedule"></a>
### Nested Schema for `deletion_schedule`

Required:

- `delete_at` (String) DB Service deletion Time

Read-Only:

- `deletion_config` (List of Object) If the service is to be deleted, this config would be honoured if no preference is provided during deleting the service (see [below for nested schema](#nestedatt--deletion_schedule--deletion_config))

<a id="nestedatt--deletion_schedule--deletion_config"></a>
### Nested Schema for `deletion_schedule.deletion_config`

Read-Only:

- `retain_availability_machine` (Boolean)



<a id="nestedblock--integrations_config"></a>
### Nested Schema for `integrations_config`

Optional:

- `integrations` (List of String)


<a id="nestedblock--maintenance_window"></a>
### Nested Schema for `maintenance_window`

Required:

- `day` (String)
- `duration` (Number)
- `time` (String) Time value in (hh:mm) format. ex. '02:00'


<a id="nestedblock--shared_with"></a>
### Nested Schema for `shared_with`

Optional:

- `users` (Block List) (see [below for nested schema](#nestedblock--shared_with--users))

<a id="nestedblock--shared_with--users"></a>
### Nested Schema for `shared_with.users`

Optional:

- `email_id` (String)
- `role` (String)



<a id="nestedblock--snapshot_configuration"></a>
### Nested Schema for `snapshot_configuration`

Optional:

- `auto_snapshot` (Boolean) Specify whether to capture automated snapshots for the DB Service, default true.
- `sla` (String) The snapshot SLA for the DB Service. If not specified, a default SLA would be associated with the DB Service
- `snapshot_window` (Block List, Max: 1) (see [below for nested schema](#nestedblock--snapshot_configuration--snapshot_window))

<a id="nestedblock--snapshot_configuration--snapshot_window"></a>
### Nested Schema for `snapshot_configuration.snapshot_window`

Optional:

- `duration` (Number) The allowed duration for capturing the DB Service backup
- `time` (String) Time value in (hh:mm) format. ex. '02:00'



<a id="nestedblock--tags"></a>
### Nested Schema for `tags`

Optional:

- `name` (String) Case sensitive, tag name
- `value` (String) Case sensitive, tag value


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)


<a id="nestedatt--cloned_from_info"></a>
### Nested Schema for `cloned_from_info`

Read-Only:

- `availability_machine` (String)
- `availability_machine_id` (String)
- `maximum_recoverability` (Boolean)
- `pitr_time` (String)
- `snapshot_id` (String)
- `snapshot_name` (String)
- `snapshot_time` (String)
- `tessell_service` (String)
- `tessell_service_id` (String)


<a id="nestedatt--context_info"></a>
### Nested Schema for `context_info`

Read-Only:

- `description` (String)
- `sub_status` (String)


<a id="nestedatt--deletion_config"></a>
### Nested Schema for `deletion_config`

Read-Only:

- `retain_availability_machine` (Boolean)


<a id="nestedatt--instances"></a>
### Nested Schema for `instances`

Read-Only:

- `availability_zone` (String)
- `cloud` (String)
- `compute_type` (String)
- `connect_string` (List of Object) (see [below for nested schema](#nestedobjatt--instances--connect_string))
- `data_volume_iops` (Number)
- `date_created` (String)
- `encryption_key` (String)
- `id` (String)
- `instance_group_id` (String)
- `last_started_at` (String)
- `last_stopped_at` (String)
- `name` (String)
- `parameter_profile` (List of Object) (see [below for nested schema](#nestedobjatt--instances--parameter_profile))
- `region` (String)
- `role` (String)
- `software_image` (String)
- `software_image_version` (String)
- `status` (String)
- `storage` (Number)
- `tessell_service_id` (String)
- `type` (String)
- `updates_in_progress` (List of Object) (see [below for nested schema](#nestedobjatt--instances--updates_in_progress))
- `vpc` (String)

<a id="nestedobjatt--instances--connect_string"></a>
### Nested Schema for `instances.connect_string`

Read-Only:

- `connect_descriptor` (String)
- `endpoint` (String)
- `master_user` (String)
- `service_port` (String)


<a id="nestedobjatt--instances--parameter_profile"></a>
### Nested Schema for `instances.parameter_profile`

Read-Only:

- `id` (String)
- `name` (String)
- `status` (String)
- `version` (String)


<a id="nestedobjatt--instances--updates_in_progress"></a>
### Nested Schema for `instances.updates_in_progress`

Read-Only:

- `reference_id` (String)
- `submitted_at` (String)
- `update_info` (Map of String)
- `update_type` (String)



<a id="nestedatt--upcoming_scheduled_actions"></a>
### Nested Schema for `upcoming_scheduled_actions`

Read-Only:

- `delete` (List of Object) (see [below for nested schema](#nestedobjatt--upcoming_scheduled_actions--delete))
- `patch` (List of Object) (see [below for nested schema](#nestedobjatt--upcoming_scheduled_actions--patch))
- `start_stop` (List of Object) (see [below for nested schema](#nestedobjatt--upcoming_scheduled_actions--start_stop))

<a id="nestedobjatt--upcoming_scheduled_actions--delete"></a>
### Nested Schema for `upcoming_scheduled_actions.delete`

Read-Only:

- `at` (String)


<a id="nestedobjatt--upcoming_scheduled_actions--patch"></a>
### Nested Schema for `upcoming_scheduled_actions.patch`

Read-Only:

- `at` (String)
- `message` (String)


<a id="nestedobjatt--upcoming_scheduled_actions--start_stop"></a>
### Nested Schema for `upcoming_scheduled_actions.start_stop`

Read-Only:

- `action` (String)
- `at` (String)



<a id="nestedatt--updates_in_progress"></a>
### Nested Schema for `updates_in_progress`

Read-Only:

- `reference_id` (String)
- `submitted_at` (String)
- `update_info` (Map of String)
- `update_type` (String)


